(prop :Map<String,Entry> entries (new Map))

(method :Void process [:Archive archive]
    (doFor e (entries.iterator)
        (processEntry archive e)
        (archive.refreshEntry e)))

(defNew [&prop :EntryChecker canProcessEntry
            &prop :EntryProcessor processEntry]
    [])

(method :Void checkEntryInOrOut [:Archive archive :Entry e]
    (if (canProcessEntry archive e)
            (dictSet entries e.id e)
        (entries.remove e.id)))
